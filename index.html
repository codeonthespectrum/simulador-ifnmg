<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Posi√ß√£o - IFNMG Processo Seletivo 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a5f2a;
            --primary-dark: #134a20;
            --secondary: #f5f5f5;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --text: #333;
            --text-light: #666;
            --border: #ddd;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: var(--primary);
            border-radius: 15px;
            color: white;
            box-shadow: var(--shadow);
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 0.95rem;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .card h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h2::before {
            content: '';
            width: 4px;
            height: 24px;
            background: var(--primary);
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text);
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
            font-family: inherit;
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 95, 42, 0.1);
        }

        .form-group input[type="number"] {
            -moz-appearance: textfield;
        }

        .form-group input::-webkit-outer-spin-button,
        .form-group input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .resultado {
            display: none;
        }

        .resultado.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .resultado-header {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .resultado-header.aprovado {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 2px solid var(--success);
        }

        .resultado-header.reprovado {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border: 2px solid var(--danger);
        }

        .resultado-header h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .resultado-header.aprovado h3 {
            color: var(--success);
        }

        .resultado-header.reprovado h3 {
            color: var(--danger);
        }

        .resultado-header p {
            font-size: 1rem;
            color: var(--text-light);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--secondary);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-card .label {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 5px;
        }

        .detalhes-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .detalhes-table th,
        .detalhes-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .detalhes-table th {
            background: var(--secondary);
            font-weight: 600;
            color: var(--text);
        }

        .detalhes-table tr:hover {
            background: #fafafa;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .badge.success {
            background: #d4edda;
            color: var(--success);
        }

        .badge.danger {
            background: #f8d7da;
            color: var(--danger);
        }

        .badge.warning {
            background: #fff3cd;
            color: #856404;
        }

        .concorrencia-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .concorrencia-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            color: white;
            text-align: center;
        }

        .concorrencia-card.modalidade {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .concorrencia-card .titulo {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .concorrencia-card .valor {
            font-size: 2.2rem;
            font-weight: 700;
        }

        .concorrencia-card .detalhe {
            font-size: 0.8rem;
            opacity: 0.85;
            margin-top: 5px;
        }

        .concorrencia-card .barra-container {
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            height: 8px;
            margin-top: 12px;
            overflow: hidden;
        }

        .concorrencia-card .barra {
            height: 100%;
            background: white;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .nota-corte-card {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            border-radius: 12px;
            padding: 20px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }

        .nota-corte-card.dentro {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .nota-corte-card .titulo {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .nota-corte-card .nota {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .nota-corte-card .comparacao {
            font-size: 0.85rem;
            margin-top: 10px;
            opacity: 0.9;
        }

        .nota-corte-card .diferenca {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 12px;
            border-radius: 20px;
            margin-top: 8px;
            font-weight: 600;
        }

        .info-box {
            background: #e7f3ff;
            border: 1px solid #b6d4fe;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }

        .info-box h4 {
            color: #084298;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #084298;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .curso-info {
            background: #fff3cd;
            border: 1px solid #ffecb5;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .curso-info h4 {
            color: #664d03;
            margin-bottom: 5px;
        }

        .curso-info p {
            color: #664d03;
            font-size: 0.9rem;
        }

        .vagas-info {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .vaga-item {
            background: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
        }

        .vaga-item strong {
            color: var(--primary);
        }

        footer {
            text-align: center;
            padding: 20px;
            color: var(--text-light);
            font-size: 0.85rem;
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
        }

        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.85rem;
            color: #856404;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.4rem;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }

            .stat-card .value {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üéì Simulador de Posi√ß√£o IFNMG</h1>
            <p>Processo Seletivo 2025 - Edital 1048/2025</p>
        </header>

        <div class="card">
            <h2>Simular Posi√ß√£o</h2>
            
            <div class="form-group">
                <label for="curso">Selecione o Curso</label>
                <select id="curso" onchange="atualizarModalidades()">
                    <option value="">-- Selecione o curso --</option>
                </select>
            </div>

            <div class="form-group">
                <label for="modalidade">Modalidade de Concorr√™ncia</label>
                <select id="modalidade">
                    <option value="">-- Selecione a modalidade --</option>
                </select>
            </div>

            <div class="form-group">
                <label for="nota">Sua Nota (0 a 100)</label>
                <input type="number" id="nota" placeholder="Ex: 75.50" min="0" max="100" step="0.01">
            </div>

            <button class="btn" onclick="simular()">üîç Simular Posi√ß√£o</button>
        </div>

        <div class="card resultado" id="resultado">
            <h2>Resultado da Simula√ß√£o</h2>
            
            <div class="curso-info" id="cursoInfo"></div>

            <div class="resultado-header" id="resultadoHeader">
                <h3 id="statusText"></h3>
                <p id="statusSubtext"></p>
            </div>

            <div class="nota-corte-card" id="notaCorteCard">
                <div class="titulo">üéØ Nota de Corte Estimada (Modalidade)</div>
                <div class="nota" id="notaCorte">-</div>
                <div class="comparacao" id="comparacaoNota"></div>
                <div class="diferenca" id="diferencaNota"></div>
            </div>

            <div class="concorrencia-grid">
                <div class="concorrencia-card modalidade">
                    <div class="titulo">üìä Concorr√™ncia na Modalidade</div>
                    <div class="valor" id="concorrenciaModalidade">-</div>
                    <div class="detalhe" id="detalheConcorrenciaMod">candidatos por vaga</div>
                    <div class="barra-container">
                        <div class="barra" id="barraMod" style="width: 0%"></div>
                    </div>
                </div>
                <div class="concorrencia-card">
                    <div class="titulo">üìä Concorr√™ncia Geral</div>
                    <div class="valor" id="concorrenciaGeral">-</div>
                    <div class="detalhe" id="detalheConcorrenciaGeral">candidatos por vaga</div>
                    <div class="barra-container">
                        <div class="barra" id="barraGeral" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="value" id="posicaoModalidade">-</div>
                    <div class="label">Posi√ß√£o na Modalidade</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="totalModalidade">-</div>
                    <div class="label">Concorrentes na Modalidade</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="posicaoGeral">-</div>
                    <div class="label">Posi√ß√£o Geral</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="totalGeral">-</div>
                    <div class="label">Concorrentes no Geral</div>
                </div>
            </div>

            <h3 style="margin: 20px 0 15px; color: var(--text);">üìä Detalhes</h3>
            <table class="detalhes-table">
                <thead>
                    <tr>
                        <th>Categoria</th>
                        <th>Sua Posi√ß√£o</th>
                        <th>Vagas Dispon√≠veis</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="detalhesBody">
                </tbody>
            </table>

            <div class="info-box">
                <h4>‚ÑπÔ∏è Informa√ß√µes sobre Modalidades</h4>
                <p>
                    <strong>AC:</strong> Ampla Concorr√™ncia<br>
                    <strong>V_PCD:</strong> PcD - Ampla Concorr√™ncia (vaga exclusiva)<br>
                    <strong>V_EFA:</strong> Egresso da EFA (Escola Fam√≠lia Agr√≠cola)<br>
                    <strong>LB_PPI:</strong> Escola P√∫blica, Renda ‚â§ 1SM, Preto/Pardo/Ind√≠gena<br>
                    <strong>LB_EP:</strong> Escola P√∫blica, Renda ‚â§ 1SM<br>
                    <strong>LB_PCD:</strong> Escola P√∫blica, Renda ‚â§ 1SM, PcD<br>
                    <strong>LB_Q:</strong> Escola P√∫blica, Renda ‚â§ 1SM, Quilombola<br>
                    <strong>LI_PPI:</strong> Escola P√∫blica, Independente de Renda, Preto/Pardo/Ind√≠gena<br>
                    <strong>LI_EP:</strong> Escola P√∫blica, Independente de Renda<br>
                    <strong>LI_PCD:</strong> Escola P√∫blica, Independente de Renda, PcD<br>
                    <strong>LI_Q:</strong> Escola P√∫blica, Independente de Renda, Quilombola
                </p>
            </div>

            <div class="disclaimer">
                ‚ö†Ô∏è <strong>Aten√ß√£o:</strong> Esta √© uma simula√ß√£o baseada na lista preliminar de inscri√ß√µes deferidas. 
                O resultado final pode variar ap√≥s recursos, desist√™ncias e outras altera√ß√µes no processo seletivo oficial.
                Consulte sempre os canais oficiais do IFNMG para informa√ß√µes definitivas.
            </div>
        </div>

        <footer>
            <p>Desenvolvido para auxiliar candidatos do IFNMG</p>
            <p>Dados baseados no Edital 1048/2025 e Lista Preliminar de Inscri√ß√µes</p>
        </footer>
    </div>

    <script>
        let dadosSimulador = null;

        // Carregar dados ao iniciar
        async function carregarDados() {
            try {
                const response = await fetch('dados_simulador.json');
                dadosSimulador = await response.json();
                popularCursos();
            } catch (error) {
                console.error('Erro ao carregar dados:', error);
                alert('Erro ao carregar dados. Verifique se o arquivo dados_simulador.json est√° presente.');
            }
        }

        function popularCursos() {
            const selectCurso = document.getElementById('curso');
            
            // Agrupar cursos por nome
            const cursosAgrupados = {};
            for (const [codigo, info] of Object.entries(dadosSimulador.cursos)) {
                const key = `${codigo} - ${info.nome} - ${info.campus}`;
                cursosAgrupados[key] = {
                    codigo,
                    nome: info.nome,
                    campus: info.campus,
                    vagas: info.vagas
                };
            }

            // Ordenar por nome
            const cursosOrdenados = Object.entries(cursosAgrupados).sort((a, b) => 
                a[1].nome.localeCompare(b[1].nome) || a[1].campus.localeCompare(b[1].campus)
            );

            for (const [key, info] of cursosOrdenados) {
                const option = document.createElement('option');
                option.value = info.codigo;
                option.textContent = `${info.nome} - ${info.campus}`;
                selectCurso.appendChild(option);
            }
        }

        function atualizarModalidades() {
            const codigoCurso = document.getElementById('curso').value;
            const selectModalidade = document.getElementById('modalidade');
            
            selectModalidade.innerHTML = '<option value="">-- Selecione a modalidade --</option>';

            if (!codigoCurso) return;

            const nomesModalidades = {
                'AC': 'Ampla Concorr√™ncia',
                'V_PCD': 'PcD - Ampla Concorr√™ncia',
                'V_EFA': 'Egresso EFA',
                'LB_PPI': 'Escola P√∫blica, Renda ‚â§ 1SM, PPI',
                'LB_EP': 'Escola P√∫blica, Renda ‚â§ 1SM',
                'LB_PCD': 'Escola P√∫blica, Renda ‚â§ 1SM, PcD',
                'LB_Q': 'Escola P√∫blica, Renda ‚â§ 1SM, Quilombola',
                'LI_PPI': 'Escola P√∫blica, Indep. Renda, PPI',
                'LI_EP': 'Escola P√∫blica, Indep. Renda',
                'LI_PCD': 'Escola P√∫blica, Indep. Renda, PcD',
                'LI_Q': 'Escola P√∫blica, Indep. Renda, Quilombola'
            };

            // Mostrar TODAS as modalidades que t√™m vagas no curso (baseado nas vagas, n√£o nas inscri√ß√µes)
            const cursoInfo = dadosSimulador.cursos[codigoCurso];
            const todasModalidades = ['AC', 'V_PCD', 'V_EFA', 'LB_PPI', 'LB_EP', 'LB_PCD', 'LB_Q', 'LI_PPI', 'LI_EP', 'LI_PCD', 'LI_Q'];
            
            // Filtrar apenas modalidades que t√™m vagas neste curso
            const modalidadesDisponiveis = todasModalidades.filter(mod => cursoInfo.vagas[mod] > 0);

            for (const mod of modalidadesDisponiveis) {
                const option = document.createElement('option');
                option.value = mod;
                option.textContent = nomesModalidades[mod] || mod;
                selectModalidade.appendChild(option);
            }
        }

        function simular() {
            const codigoCurso = document.getElementById('curso').value;
            const modalidade = document.getElementById('modalidade').value;
            const notaInput = document.getElementById('nota').value;

            if (!codigoCurso || !modalidade || !notaInput) {
                alert('Por favor, preencha todos os campos.');
                return;
            }

            const nota = parseFloat(notaInput);
            if (isNaN(nota) || nota < 0 || nota > 100) {
                alert('Por favor, insira uma nota v√°lida entre 0 e 100.');
                return;
            }

            const cursoInfo = dadosSimulador.cursos[codigoCurso];
            const inscricoesCurso = dadosSimulador.inscricoes.filter(i => i.codigo === codigoCurso);
            
            // Calcular posi√ß√£o na modalidade
            const inscricoesModalidade = inscricoesCurso.filter(i => i.modalidade === modalidade);
            const posicaoModalidade = inscricoesModalidade.filter(i => i.nota > nota).length + 1;
            const totalModalidade = inscricoesModalidade.length + 1; // +1 para incluir o candidato

            // Calcular posi√ß√£o geral
            const posicaoGeral = inscricoesCurso.filter(i => i.nota > nota).length + 1;
            const totalGeral = inscricoesCurso.length + 1;

            // Vagas na modalidade
            const vagasModalidade = cursoInfo.vagas[modalidade] || 0;
            const vagasTotal = cursoInfo.vagas.total;

            // Calcular nota de corte (nota do √∫ltimo aprovado na modalidade)
            const inscricoesOrdenadas = [...inscricoesModalidade].sort((a, b) => b.nota - a.nota);
            let notaCorte = 0;
            if (inscricoesOrdenadas.length >= vagasModalidade && vagasModalidade > 0) {
                notaCorte = inscricoesOrdenadas[vagasModalidade - 1].nota;
            } else if (inscricoesOrdenadas.length > 0) {
                // Se h√° menos candidatos que vagas, a nota de corte √© a menor nota
                notaCorte = inscricoesOrdenadas[inscricoesOrdenadas.length - 1].nota;
            }

            // Determinar status
            const aprovadoModalidade = posicaoModalidade <= vagasModalidade;
            const aprovadoGeral = posicaoGeral <= vagasTotal;

            // Exibir resultado
            exibirResultado({
                cursoInfo,
                codigoCurso,
                modalidade,
                nota,
                posicaoModalidade,
                totalModalidade,
                posicaoGeral,
                totalGeral,
                vagasModalidade,
                vagasTotal,
                aprovadoModalidade,
                aprovadoGeral,
                notaCorte,
                inscricoesModalidade: inscricoesOrdenadas
            });
        }

        function exibirResultado(dados) {
            const resultadoDiv = document.getElementById('resultado');
            resultadoDiv.classList.add('show');

            // Info do curso
            document.getElementById('cursoInfo').innerHTML = `
                <h4>üìö ${dados.cursoInfo.nome}</h4>
                <p><strong>Campus/Polo:</strong> ${dados.cursoInfo.campus} | <strong>C√≥digo:</strong> ${dados.codigoCurso}</p>
                <p><strong>Sua nota:</strong> ${dados.nota.toFixed(2)} pontos</p>
            `;

            // Status principal
            const header = document.getElementById('resultadoHeader');
            const statusText = document.getElementById('statusText');
            const statusSubtext = document.getElementById('statusSubtext');

            const aprovado = dados.aprovadoModalidade;
            
            header.className = 'resultado-header ' + (aprovado ? 'aprovado' : 'reprovado');
            statusText.textContent = aprovado ? '‚úÖ PROV√ÅVEL APROVA√á√ÉO' : '‚ùå PROV√ÅVEL REPROVA√á√ÉO';
            
            if (aprovado) {
                statusSubtext.textContent = `Voc√™ est√° na posi√ß√£o ${dados.posicaoModalidade}¬∫ de ${dados.vagasModalidade} vagas na sua modalidade!`;
            } else {
                const faltam = dados.posicaoModalidade - dados.vagasModalidade;
                statusSubtext.textContent = `Voc√™ est√° ${faltam} posi√ß√£o(√µes) fora do n√∫mero de vagas na sua modalidade.`;
            }

            // Nota de Corte
            const notaCorteCard = document.getElementById('notaCorteCard');
            const notaCorteEl = document.getElementById('notaCorte');
            const comparacaoNota = document.getElementById('comparacaoNota');
            const diferencaNota = document.getElementById('diferencaNota');
            
            notaCorteCard.className = 'nota-corte-card ' + (aprovado ? 'dentro' : '');
            notaCorteEl.textContent = dados.notaCorte.toFixed(2);
            
            const diferenca = dados.nota - dados.notaCorte;
            if (diferenca >= 0) {
                comparacaoNota.textContent = `Sua nota est√° ACIMA da nota de corte`;
                diferencaNota.textContent = `+${diferenca.toFixed(2)} pontos`;
                diferencaNota.style.display = 'inline-block';
            } else {
                comparacaoNota.textContent = `Sua nota est√° ABAIXO da nota de corte`;
                diferencaNota.textContent = `${diferenca.toFixed(2)} pontos`;
                diferencaNota.style.display = 'inline-block';
            }

            // Estat√≠sticas
            document.getElementById('posicaoModalidade').textContent = `${dados.posicaoModalidade}¬∫`;
            document.getElementById('totalModalidade').textContent = dados.totalModalidade;
            document.getElementById('posicaoGeral').textContent = `${dados.posicaoGeral}¬∫`;
            document.getElementById('totalGeral').textContent = dados.totalGeral;

            // Calcular e exibir concorr√™ncia
            const concorrenciaMod = dados.vagasModalidade > 0 ? (dados.totalModalidade / dados.vagasModalidade) : 0;
            const concorrenciaGeral = dados.vagasTotal > 0 ? (dados.totalGeral / dados.vagasTotal) : 0;
            
            document.getElementById('concorrenciaModalidade').textContent = concorrenciaMod.toFixed(2);
            document.getElementById('concorrenciaGeral').textContent = concorrenciaGeral.toFixed(2);
            
            document.getElementById('detalheConcorrenciaMod').textContent = 
                `${dados.totalModalidade} candidatos para ${dados.vagasModalidade} vaga${dados.vagasModalidade > 1 ? 's' : ''}`;
            document.getElementById('detalheConcorrenciaGeral').textContent = 
                `${dados.totalGeral} candidatos para ${dados.vagasTotal} vagas`;
            
            // Barra de progresso (quanto maior a concorr√™ncia, mais cheia a barra - max 100%)
            const maxConcorrencia = 50; // Considerar 50 candidatos/vaga como m√°ximo
            const pctMod = Math.min((concorrenciaMod / maxConcorrencia) * 100, 100);
            const pctGeral = Math.min((concorrenciaGeral / maxConcorrencia) * 100, 100);
            
            document.getElementById('barraMod').style.width = `${pctMod}%`;
            document.getElementById('barraGeral').style.width = `${pctGeral}%`;

            // Tabela de detalhes
            const nomesModalidades = {
                'AC': 'Ampla Concorr√™ncia',
                'V_PCD': 'PcD - Ampla Concorr√™ncia',
                'V_EFA': 'Egresso EFA',
                'LB_PPI': 'EP, Renda ‚â§ 1SM, PPI',
                'LB_EP': 'EP, Renda ‚â§ 1SM',
                'LB_PCD': 'EP, Renda ‚â§ 1SM, PcD',
                'LB_Q': 'EP, Renda ‚â§ 1SM, Quilombola',
                'LI_PPI': 'EP, Indep. Renda, PPI',
                'LI_EP': 'EP, Indep. Renda',
                'LI_PCD': 'EP, Indep. Renda, PcD',
                'LI_Q': 'EP, Indep. Renda, Quilombola'
            };

            const tbody = document.getElementById('detalhesBody');
            tbody.innerHTML = '';

            // Linha da modalidade selecionada
            const rowMod = document.createElement('tr');
            rowMod.innerHTML = `
                <td><strong>${nomesModalidades[dados.modalidade] || dados.modalidade}</strong></td>
                <td>${dados.posicaoModalidade}¬∫ de ${dados.totalModalidade}</td>
                <td>${dados.vagasModalidade}</td>
                <td><span class="badge ${dados.aprovadoModalidade ? 'success' : 'danger'}">${dados.aprovadoModalidade ? 'Dentro' : 'Fora'}</span></td>
            `;
            tbody.appendChild(rowMod);

            // Linha geral
            const rowGeral = document.createElement('tr');
            rowGeral.innerHTML = `
                <td><strong>Classifica√ß√£o Geral</strong></td>
                <td>${dados.posicaoGeral}¬∫ de ${dados.totalGeral}</td>
                <td>${dados.vagasTotal}</td>
                <td><span class="badge ${dados.aprovadoGeral ? 'success' : 'danger'}">${dados.aprovadoGeral ? 'Dentro' : 'Fora'}</span></td>
            `;
            tbody.appendChild(rowGeral);

            // Scroll para resultado
            resultadoDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', carregarDados);
    </script>
</body>
</html>
